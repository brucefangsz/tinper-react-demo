# 如何模拟数据并行开发

> uba-mock 功能介绍

tinper-uba 不仅有生成项目 打包项目等功能，uba 还具有 uba-mock模拟后台数据功能，依赖强大的集成开发工具 `uba` 内置 `数据模拟`、`代理请求`、`静态托管`、`开放配置`等功能.

> 配置uba-mock

通过我们使用uba 来初始化工程来看，项目内有uba-mock.js:

```
module.exports = {
  "GET": [{
    "/User/Get": "./mock/api/user/get.json"
  }],
  "POST": [{
    "/User/Post": "./mock/api/user/post.json"
  }],
  "PUT": [{
    "/User/Put": "./mock/api/user/put.json"
  }]
}

```

项目初始化暂定了三种请求方式来模拟后台数据接口。

> 使用get获取数据方式

```
...
constructor() {
    super();
    //定义 组件状态初始值
    this.state = {
      user: []
    };
  }
  componentDidMount() {
  	//组件加载完成执行获取数据方法；
    this.getData();
  }
  //获取数据方法
  getData = () => {
    let self = this;
    //使用uba-mock 定义的数据接口
    axios.get("/User/Get").then(res => {
      console.log(res);
     // {data: {…}, status: 200, statusText: "OK", headers: {…}, config: {…}, …}
     //mock 模拟数据如线上接口一致。
      if (res.status == 200 && res.data.message == "success") {
        self.setState({
          user: res.data.data
        });
      }
    });
  };
  ...
```

假使项目测试登录 接口，本地无法模拟，那么我们可以修改uba.config.js启用代理功能；

uba.config.js内配置

```
//远程代理访问，可以配置多个代理服务
const proxyConfig = [
  {
  	//此处打开代理
    enable: true, //true启用代理,mock服务失效.
    router: "/", //代理的路由
    url: "http://cnodejs.org",//设置代理主机域名
    options: {
      filter: function(req, res) {
        //不需要代理可以排除
        return req.url.indexOf("webpack_hmr") > -1 ? false : true;
      }
    }
  }
];
```

开启代理功能那么，就能从本地获取到，http://condejs.org上的数据。了解更多[参考](https://www.npmjs.com/package/express-http-proxy)。

